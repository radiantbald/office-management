<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–û—Ñ–∏—Å–Ω—ã–µ –∑–¥–∞–Ω–∏—è</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="app-header-content">
        <div class="header-copy">
          <div class="header-top">
            <h1 id="pageTitle">–û—Ñ–∏—Å–Ω—ã–µ –∑–¥–∞–Ω–∏—è</h1>
          </div>
          <p id="pageSubtitle">–î–æ–±–∞–≤–ª—è–π—Ç–µ –∑–¥–∞–Ω–∏—è –∏ –≤—ã–±–∏—Ä–∞–π—Ç–µ –Ω—É–∂–Ω–æ–µ –∏–∑ —Å–ø–∏—Å–∫–∞.</p>
        </div>
        <div id="headerActions" class="header-actions">
          <button id="openAddModalBtn" class="primary" type="button">–î–æ–±–∞–≤–∏—Ç—å –∑–¥–∞–Ω–∏–µ</button>
          <button id="editBuildingBtn" class="ghost is-hidden" type="button">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
          <button id="editFloorBtn" class="ghost is-hidden" type="button">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
          <button id="editSpaceBtn" class="ghost is-hidden" type="button">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
      </div>
    </header>

    <main class="app">
      <section id="buildingsPage" class="buildings-page">
        <div id="emptyState" class="placeholder app-empty">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–µ –∑–¥–∞–Ω–∏–µ.</div>
        <div id="buildingsGrid" class="buildings-grid"></div>
      </section>

      <section id="buildingPage" class="building-page is-hidden">
        <div class="breadcrumb">
          <a class="breadcrumb-link" href="/buildings">‚Üê –ö —Å–ø–∏—Å–∫—É –∑–¥–∞–Ω–∏–π</a>
        </div>
        <div class="card">
          <div class="card-header">
            <h3>–≠—Ç–∞–∂–∏</h3>
            <span id="floorsCount" class="tag">0</span>
          </div>
          <div id="buildingStatus" class="status" role="status" aria-live="polite"></div>
          <div id="floorsList" class="floors-list"></div>
          <div id="floorsEmpty" class="placeholder app-empty is-hidden">–≠—Ç–∞–∂–∏ –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.</div>
        </div>
      </section>

      <section id="floorPage" class="floor-page is-hidden">
        <div class="breadcrumb">
          <a id="breadcrumbBuildings" class="breadcrumb-link" href="/buildings">‚Üê –ö —Å–ø–∏—Å–∫—É –∑–¥–∞–Ω–∏–π</a>
          <span class="breadcrumb-separator">/</span>
          <a id="breadcrumbBuilding" class="breadcrumb-link" href="/buildings">–ó–¥–∞–Ω–∏–µ</a>
        </div>
        <div id="floorPlanLayout" class="floor-plan-layout">
          <aside id="floorPlanActions" class="floor-plan-actions is-hidden" aria-hidden="true">
            <button id="openFloorPlanModalBtn" class="primary" type="button">–ò–∑–º–µ–Ω–∏—Ç—å –ø–ª–∞–Ω</button>
            <button id="cancelFloorEditBtn" class="ghost floor-actions-cancel" type="button">
              –û—Ç–º–µ–Ω–∏—Ç—å
            </button>
          </aside>
          <aside id="floorPlanSpaces" class="floor-plan-spaces is-hidden" aria-hidden="true">
            <div class="floor-spaces-header">
              <h3 class="floor-actions-title">–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</h3>
              <button
                id="addSpaceBtn"
                class="icon-button add-space-btn"
                type="button"
                aria-label="–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ"
                title="–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ"
                data-label="–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ"
                data-active-label="–û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ"
                data-icon="+"
                data-active-icon="√ó"
              >
                +
              </button>
            </div>
            <div class="floor-actions-section">
              <div id="floorSpacesList" class="floor-spaces-list"></div>
              <div id="floorSpacesEmpty" class="placeholder app-empty is-hidden">
                –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –ø–æ–∫–∞ –Ω–µ—Ç.
              </div>
            </div>
          </aside>
          <div class="floor-plan">
            <div id="floorPlanPreview" class="floor-plan-preview">
              <div id="floorPlanCanvas" class="floor-plan-canvas"></div>
            </div>
            <div id="floorPlanPlaceholder" class="placeholder app-empty is-hidden">
              –ü–ª–∞–Ω —ç—Ç–∞–∂–∞ –ø–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω.
            </div>
          </div>
        </div>
      </section>

      <section id="spacePage" class="space-page is-hidden">
        <div class="breadcrumb">
          <a id="spaceBreadcrumbBuildings" class="breadcrumb-link" href="/buildings">‚Üê –ö —Å–ø–∏—Å–∫—É –∑–¥–∞–Ω–∏–π</a>
          <span class="breadcrumb-separator">/</span>
          <a id="spaceBreadcrumbBuilding" class="breadcrumb-link" href="/buildings">–ó–¥–∞–Ω–∏–µ</a>
          <span class="breadcrumb-separator">/</span>
          <a id="spaceBreadcrumbFloor" class="breadcrumb-link" href="/buildings">–≠—Ç–∞–∂</a>
        </div>
        <div class="space-layout">
          <div class="card space-map-card">
            <div class="card-header">
              <h3>–°—Ö–µ–º–∞ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</h3>
              <div class="space-card-actions">
                <button
                  id="addDeskBtn"
                  class="icon-button add-desk-btn is-hidden"
                  type="button"
                  aria-label="–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª"
                  title="–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª"
                  data-label="–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª"
                  data-active-label="–û—Ç–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ"
                  data-icon="+"
                  data-active-icon="√ó"
                >
                  +
                </button>
                <button
                  id="deleteDeskBtn"
                  class="icon-button desk-delete-btn is-hidden"
                  type="button"
                  aria-label="–£–¥–∞–ª–∏—Ç—å —Å—Ç–æ–ª"
                  title="–£–¥–∞–ª–∏—Ç—å —Å—Ç–æ–ª"
                >
                  üóë
                </button>
                <button
                  id="shrinkDeskBtn"
                  class="icon-button desk-shrink-btn is-hidden"
                  type="button"
                  aria-label="–£–º–µ–Ω—å—à–∏—Ç—å —Å—Ç–æ–ª"
                  title="–£–º–µ–Ω—å—à–∏—Ç—å —Å—Ç–æ–ª"
                >
                  ‚àí
                </button>
                <button
                  id="rotateDeskBtn"
                  class="icon-button desk-rotate-btn is-hidden"
                  type="button"
                  aria-label="–ü–æ–≤–µ—Ä–Ω—É—Ç—å —Å—Ç–æ–ª"
                  title="–ü–æ–≤–µ—Ä–Ω—É—Ç—å —Å—Ç–æ–ª"
                >
                  ‚Üª
                </button>
              </div>
            </div>
            <div id="spacePageStatus" class="status" role="status" aria-live="polite"></div>
            <div id="spaceSnapshot" class="space-snapshot">
              <div id="spaceSnapshotCanvas" class="space-snapshot-canvas"></div>
            </div>
            <div id="spaceSnapshotPlaceholder" class="placeholder app-empty is-hidden">
              –°—Ö–µ–º–∞ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.
            </div>
          </div>
        </div>
      </section>
    </main>

    <div id="floorPlanModal" class="modal floor-plan-modal" aria-hidden="true">
      <div class="modal-backdrop" data-modal-close="true"></div>
      <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="floorPlanModalTitle">
        <div class="modal-header">
          <h2 id="floorPlanModalTitle">–î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞–Ω —ç—Ç–∞–∂–∞</h2>
          <button id="floorPlanModalCloseBtn" class="icon-button" type="button" data-modal-close="true">
            ‚úï
          </button>
        </div>
        <div id="floorPlanModalBody">
          <div class="floor-actions-section">
            <label class="field">
              <span id="floorPlanActionLabel">–ü–ª–∞–Ω —ç—Ç–∞–∂–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)</span>
              <input id="floorPlanFile" type="file" accept="image/*" />
              <span class="hint">–§–∞–π–ª –±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ SVG –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω.</span>
            </label>
            <button id="uploadFloorPlanBtn" class="primary" type="button">–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–ª–∞–Ω</button>
          </div>
          <div class="form-actions">
            <button id="deleteFloorPlanBtn" class="context-action danger is-hidden" type="button">
              –£–¥–∞–ª–∏—Ç—å –ø–ª–∞–Ω
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="buildingModal" class="modal" aria-hidden="true">
      <div class="modal-backdrop" data-modal-close="true"></div>
      <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-header">
          <h2 id="modalTitle">–î–æ–±–∞–≤–∏—Ç—å –∑–¥–∞–Ω–∏–µ</h2>
          <button id="modalCloseBtn" class="icon-button" type="button" data-modal-close="true">
            ‚úï
          </button>
        </div>
        <form id="buildingForm" class="form">
          <label class="field">
            <span>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–¥–∞–Ω–∏—è</span>
            <input id="buildingName" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –ë–¶ –í–µ–≥–∞" required />
          </label>
          <label class="field">
            <span>–ê–¥—Ä–µ—Å</span>
            <input
              id="buildingAddress"
              type="text"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, —É–ª. –õ–µ–Ω–∏–Ω–∞, 12"
              required
            />
          </label>
          <label class="field">
            <span>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–¥–∞–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>
            <input id="buildingImage" type="file" accept="image/*" />
            <span id="imageHint" class="hint">–ï—Å–ª–∏ –Ω–µ –¥–æ–±–∞–≤–∏—Ç—å, –≤—ã–±–µ—Ä–µ–º —Å–ª—É—á–∞–π–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É.</span>
          </label>
          <div id="floorsFields" class="field-group">
            <label class="field">
              <span>–ü–æ–¥–∑–µ–º–Ω—ã–µ —ç—Ç–∞–∂–∏</span>
              <input
                id="buildingUndergroundFloors"
                type="number"
                min="0"
                step="1"
                placeholder="0"
              />
            </label>
            <label class="field">
              <span>–ù–∞–∑–µ–º–Ω—ã–µ —ç—Ç–∞–∂–∏</span>
              <input
                id="buildingAbovegroundFloors"
                type="number"
                min="0"
                step="1"
                placeholder="0"
              />
            </label>
          </div>
          <div id="imagePreview" class="image-preview is-hidden">
            <img id="imagePreviewImg" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–¥–∞–Ω–∏—è" />
            <button id="removeImageBtn" class="ghost image-remove" type="button">
              –£–¥–∞–ª–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            </button>
          </div>
          <div class="form-actions">
            <button id="submitBtn" class="primary" type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
            <button id="deleteBuildingBtn" class="context-action danger is-hidden" type="button">
              –£–¥–∞–ª–∏—Ç—å –∑–¥–∞–Ω–∏–µ
            </button>
          </div>
        </form>
        <div id="status" class="status" role="status" aria-live="polite"></div>
      </div>
    </div>
    <div id="spaceModal" class="modal" aria-hidden="true">
      <div class="modal-backdrop" data-modal-close="true"></div>
      <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="spaceModalTitle">
        <div class="modal-header">
          <h2 id="spaceModalTitle">–ù–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</h2>
          <button id="spaceModalCloseBtn" class="icon-button" type="button" data-modal-close="true">
            ‚úï
          </button>
        </div>
        <form id="spaceForm" class="form">
          <label class="field">
            <span>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</span>
            <input id="spaceNameField" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, Open Space" required />
          </label>
          <label class="field">
            <span>–¢–∏–ø –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</span>
            <select id="spaceKindField" required>
              <option value="coworking">–ö–æ–≤–æ—Ä–∫–∏–Ω–≥</option>
              <option value="meeting">–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–∫–∞</option>
            </select>
          </label>
          <label id="spaceCapacityFieldRow" class="field is-hidden">
            <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫</span>
            <input
              id="spaceCapacityField"
              type="number"
              inputmode="numeric"
              min="1"
              step="1"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 6"
            />
          </label>
          <div class="field">
            <span>–¶–≤–µ—Ç –∑–∞–ª–∏–≤–∫–∏</span>
            <div class="color-input">
              <button id="spaceColorPreview" class="color-swatch" type="button" aria-label="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"></button>
              <input id="spaceColorInput" type="color" value="#60a5fa" aria-label="–¶–≤–µ—Ç –∑–∞–ª–∏–≤–∫–∏" />
            </div>
          </div>
          <div class="form-actions">
            <button id="spaceSaveBtn" class="primary" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button id="spaceCancelBtn" class="ghost" type="button" data-modal-close="true">
              –û—Ç–º–µ–Ω–∏—Ç—å
            </button>
            <button id="spaceDeleteBtn" class="danger is-hidden" type="button">
              –£–¥–∞–ª–∏—Ç—å
            </button>
          </div>
        </form>
        <div id="spaceStatus" class="status" role="status" aria-live="polite"></div>
      </div>
    </div>
    <script src="/imagetracer.js"></script>
    <script src="/main.js"></script>
  </body>
</html>
